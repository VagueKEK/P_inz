/* ===================== THEME VARS ===================== */
:root{
  --font-scale: 1;

  /* domyślny theme */
  --bg: #0a1222;          
  --card: #151f35;        
  --ink: #eaf0f7;         
  --muted: #a8b3c3;       
  --border: #314566;      

  --appbar-bg: #0c1528;   
  --surface-1: #0f1a2e;   

  --green: #22c55e;
  --amber: #f4b000;
  --sky:   #18c2e8;
  --rose:  #ef5a6b;
}

/* ===================== HIGH CONTRAST ===================== */
body[data-high-contrast="on"] {
  --bg: #000;
  --card: #0b0b0b;
  --ink: #fff500;
  --muted: #ffe666;
  --border: #ffe700;
  --appbar-bg: #000;
  --surface-1: #111;

  --green: #00ff99;
  --amber: #ffd400;
  --sky:   #42e9ff;
  --rose:  #ff5c7a;

  font-family: Verdana, Arial, sans-serif !important;
}

/* ===================== GLOBAL ===================== */
html { font-size: calc(16px * var(--font-scale)); }
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans;
  background: var(--bg);
  color: var(--ink);
}
.a11y-dock { display: none !important; }

/* ===================== LAYOUT ===================== */
.container{ max-width: 1120px; margin: 0 auto; padding: 1rem; }
.mt { margin-top: 1rem; }

.appbar{
  background: var(--appbar-bg);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 20;
  box-shadow: 0 6px 16px rgba(0,0,0,.25);
}
.nav-inner{ display:flex; align-items:center; justify-content:space-between; gap:1rem; }
.brand{ font-weight: 800; letter-spacing:.2px; }
.nav-links{ display:flex; gap: .75rem; }
.nav-link{
  color: var(--muted); text-decoration:none;
  padding:.5rem .75rem; border-radius:.4rem;
  transition: background .15s ease, color .15s ease, outline-color .15s ease;
}
.nav-link.active, .nav-link:hover{
  color: var(--ink);
  background: #0e1830;
  outline: 1px solid var(--border);
}

.grid-2{ display:grid; grid-template-columns: 1fr 1.4fr; gap: 1rem; }
.grid-3{ display:grid; grid-template-columns: 1fr 1fr 1fr; }
.row{ display:flex; align-items:center; gap:.5rem; }
.stack{ display:flex; flex-direction:column; }
.gap{ gap: .75rem; }
.center{ align-items:center; }
.between{ justify-content:space-between; }

@media (max-width: 1024px){
  .grid-2{ grid-template-columns: 1fr; }
}
@media (max-width: 640px){
  .grid-3{ grid-template-columns: 1fr; }
}

/* ===================== CARDS ===================== */
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: .75rem;
  padding: .9rem;
  box-shadow: 0 6px 18px rgba(0,0,0,.28);
}
.card.inner{ background: transparent; box-shadow: none; }

/* ===================== FORM ===================== */
.input{
  width:100%; padding:.65rem .8rem;
  color: var(--ink);
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius:.6rem;
  outline:none;
}
.input:focus{
  border-color:#4b6fb3;
  box-shadow: 0 0 0 3px rgba(75, 130, 255, .18);
}
.input.sm{ padding:.45rem .55rem; }
select.input{ appearance:auto; }

/* ===================== BUTTONS ===================== */
.btn{
  border:1px solid var(--border);
  background: var(--surface-1);
  color:var(--ink);
  padding:.55rem .8rem;
  border-radius:.55rem;
  cursor:pointer;
  transition: filter .12s ease, transform .06s ease;
}
.btn:hover{ filter:brightness(1.1); }
.btn:active{ transform: translateY(1px); }

.btn-green{ background: var(--green); color:#062b12; border-color: #14733a; }
.btn-amber{ background: var(--amber); color:#231a00; border-color: #7d5f00; }
.btn-sky{ background: var(--sky); color:#05252a; border-color: #0b7b93; }
.btn-rose{ background: var(--rose); color:#2c0006; border-color: #a62a38; }

/* ===================== DETAILS ===================== */
.sub-row{ display:flex; justify-content:space-between; gap:.75rem; }
.sub-info{ display:flex; flex-direction:column; gap:.3rem; min-width: 0; }
.sub-name{ font-weight:700; word-break: break-word; }
.sub-meta .badge{
  display:inline-block; padding:.2rem .5rem; border-radius:.4rem;
  background: var(--surface-1); border:1px solid var(--border); margin-right:.35rem;
}
.muted{ color: var(--muted); }
.bold{ font-weight:700; }

.stat{ padding:.5rem .75rem; border:1px dashed var(--border); border-radius:.55rem; }
.stat-value{ font-size:1.25rem; font-weight:800; }
.stat-cap{ color: var(--muted); font-weight:600; }
.stat.danger{ border-color: #ff4369; }
.stat.danger .stat-value{ color:#ff8aa1; }

.next-pay{ padding:.6rem .75rem; border:1px solid var(--border); border-radius:.55rem; }
.next-pay.soon{ border-color:#ffb800; animation: pulseBorder 1.3s ease-in-out infinite; }
@keyframes pulseBorder{
  0%{ box-shadow: 0 0 0 0 rgba(255, 214, 0, .35); }
  70%{ box-shadow: 0 0 0 14px rgba(255, 214, 0, 0); }
  100%{ box-shadow: 0 0 0 0 rgba(255, 214, 0, 0); }
}

/* ===================== A11Y FAB + PANEL ===================== */
.a11y-fab {
  position: fixed; right: 16px; bottom: 16px;
  z-index: 9999; padding: 10px 14px;
  border-radius: 9999px; cursor: pointer;
  background: var(--surface-1); color: var(--ink);
  border: 1px solid var(--border);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
}
.a11y-panel {
  position: fixed; right: 16px; bottom: 70px;
  z-index: 9999; background: var(--card); color: var(--ink);
  border: 1px solid var(--border); border-radius: 12px;
  padding: 12px; min-width: 280px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.a11y-panel .a11y-row { display:flex; gap:8px; margin-bottom:8px; }
.a11y-panel button {
  padding:8px 10px; border-radius:8px;
  border:1px solid var(--border); cursor:pointer;
  background: var(--surface-1); color: var(--ink);
}

/* ===================== FOCUS ===================== */
.nav-link:focus, .btn:focus, .input:focus, .a11y-fab:focus, .a11y-panel button:focus {
  outline: 3px solid var(--border);
  outline-offset: 2px;
}

/* ===================== SCALING OVERRIDES ===================== */
:root{ --k: var(--font-scale); }

h1 { font-size: calc(2rem * var(--k)); }
h2 { font-size: calc(1.5rem * var(--k)); }
h3 { font-size: calc(1.25rem * var(--k)); }

.container { padding: calc(1rem * var(--k)); }

.card {
  padding: calc(.9rem * var(--k));
  border-radius: calc(.75rem * var(--k));
}

.nav-link {
  padding: calc(.5rem * var(--k)) calc(.75rem * var(--k));
  border-radius: calc(.4rem * var(--k));
}

.input {
  padding: calc(.65rem * var(--k)) calc(.8rem * var(--k));
  border-radius: calc(.6rem * var(--k));
}
.input.sm { padding: calc(.45rem * var(--k)) calc(.55rem * var(--k)); }

.btn {
  padding: calc(.55rem * var(--k)) calc(.8rem * var(--k));
  border-radius: calc(.55rem * var(--k));
}

.sub-meta .badge {
  padding: calc(.2rem * var(--k)) calc(.5rem * var(--k));
  border-radius: calc(.4rem * var(--k));
  margin-right: calc(.35rem * var(--k));
}

.stat { padding: calc(.5rem * var(--k)) calc(.75rem * var(--k)); border-radius: calc(.55rem * var(--k)); }
.next-pay { padding: calc(.6rem * var(--k)) calc(.75rem * var(--k)); border-radius: calc(.55rem * var(--k)); }

.a11y-panel { padding: calc(12px * var(--k)); border-radius: calc(12px * var(--k)); min-width: calc(280px * var(--k)); }
.a11y-panel .a11y-row { gap: calc(8px * var(--k)); margin-bottom: calc(8px * var(--k)); }
.a11y-panel button { padding: calc(8px * var(--k)) calc(10px * var(--k)); border-radius: calc(8px * var(--k)); }

/* --- Calendar --- */
.cal-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: .5rem;
  margin-top: .5rem;
}
.cal-head { margin-bottom: .25rem; }
.cal-head-cell { text-align: center; font-weight: 700; }
.cal-cell {
  border: 1px solid var(--border);
  border-radius: .6rem;
  padding: .5rem;
  background: #0e1627;
  min-height: 110px;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}
.cal-dim { opacity: .45; }
.cal-day { font-weight: 800; font-size: .95rem; }
.cal-events { margin-top: .25rem; display: flex; flex-direction: column; gap: .25rem; }
.cal-pill {
  border: 1px solid var(--border);
  border-radius: .45rem;
  padding: .2rem .4rem;
  font-size: .9rem;
  background: var(--card);
}
.cal-more { font-size: .85rem; color: var(--muted); }
.cal-sum { margin-top: .2rem; font-weight: 700; font-size: .9rem; }
.cal-up { padding: .5rem .6rem; border: 1px dashed var(--border); border-radius: .55rem; }
.cal-soon {
  border-color: #ff4369 !important;           
  box-shadow: 0 0 0 0 rgba(255, 67, 105, .35);
  animation: pulseBorder 1.3s ease-in-out infinite;
}

/* --- Calendar layout --- */
.cal-layout{
  display:grid;
  grid-template-columns: 1fr 340px;
  gap: 1rem;
}
.cal-main{ min-width:0; }
.cal-sidebar{ min-width:280px; max-width:360px; }

@media (max-width: 1200px){
  .cal-layout{ grid-template-columns: 1fr; }
  .cal-sidebar{ order:2; }
}


/* --- WYKRES --- */
/* wykres (scroll poziomy gdy dużo słupków) */
.chart-scroll {
  width: 100%;
  overflow-x: auto;
  padding-bottom: .25rem;
}

/* słupek – korzysta z bieżącego koloru */
.chart-bar {
  fill: #36a2eb; /* spokojny niebieski; można podmienić na var() jeśli chcesz */
  opacity: .9;
}
.chart-bar:hover { opacity: 1; }

/* Dzisiejszy dzień w kalendarzu */
.cal-today{
  border: 2px solid #22c55e !important;   /* zielony obrys */
  box-shadow: 0 0 0 0 rgba(34,197,94,.35);
  position: relative;
  animation: calTodayPulse 1.6s ease-in-out infinite;
}

/* gdy jednocześnie .cal-soon (czerwona) i .cal-today – wygrywa zielony */
.cal-soon.cal-today{
  border-color: #22c55e !important;
  box-shadow: 0 0 0 0 rgba(34,197,94,.35);
}

@keyframes calTodayPulse{
  0%   { box-shadow: 0 0 0 0 rgba(34,197,94,.35); }
  70%  { box-shadow: 0 0 0 14px rgba(34,197,94,0); }
  100% { box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}

